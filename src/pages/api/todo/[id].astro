---
import TodoItem from '../../../components/TodoItem.astro'
import { deleteById, getTodoById, updateTodo } from '../../../data/todos'

export const partial = true

const { id } = Astro.params

let todo = getTodoById(id)

if(Astro.request.method === 'DELETE') {
  deleteById(id)
}

if(Astro.request.method === 'PATCH') {
  todo = updateTodo(id, {done: !todo.done})
  console.log('todo', todo)
}
---
{Astro.request.method === 'PATCH' && <TodoItem todo={todo} />}


